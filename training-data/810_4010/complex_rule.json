[
    {
        "name": "DETAIL_RECORD",
        "type": "Group",
        "iterator": ["iLineCount", "iTempLineCount"],
        "input_rule": {
            "explicit_rule": "IF $DETAIL_RECORD[iLineCount].#INVOICE_LINE_TYPE_4000 = \"L\" THEN\n\tBEGIN\n\t\t$GRP_TEMP_LINE_ITEMS[iLineCount].#TEMPLI_QUANTITY_4000:2 = #QUANTITY_4000;\n\t\tIF #LINE_TP_ATTRIBUTE7_5180 != \"\" THEN\n\t\t\t$GRP_TEMP_LINE_ITEMS[iLineCount].#TEMPLI_UOM_CODE_4000:2 = TRIM(#LINE_TP_ATTRIBUTE7_5180);\n\t\tELSE\n\t\t\t$GRP_TEMP_LINE_ITEMS[iLineCount].#TEMPLI_UOM_CODE_4000:2 = TRIM(#UOM_CODE_4000);\n\t\t$GRP_TEMP_LINE_ITEMS[iLineCount].#TEMPLI_UNIT_SELLING_PRICE_4000:2 = #UNIT_SELLING_PRICE_4000;\n\t\t$GRP_TEMP_LINE_ITEMS[iLineCount].#TEMPLI_LINE_TP_ATTRIBUTE1_5170:2 = #LINE_TP_ATTRIBUTE1_5170;\n\t\t$GRP_TEMP_LINE_ITEMS[iLineCount].#TEMPLI_CUSTOMER_ITEM_NUMBER_4000:2 = #CUSTOMER_ITEM_NUMBER_4000;\n\t\t$GRP_TEMP_LINE_ITEMS[iLineCount].#TEMPLI_ITEM_DESCRIPTION_4010:2 = #ITEM_DESCRIPTION_4010;\n\tEND\n\nIF $DETAIL_RECORD[iLineCount].#INVOICE_LINE_TYPE_4000 = \"D\" THEN\n\tBEGIN\n\t\tIF LEFT($DETAIL_RECORD[iLineCount].#ITEM_DESCRIPTION_4010,35) != \"LINE TO HEADER MODIFIER DESCRIPTION\" THEN\n\t\t\tBEGIN\n\t\t\t\t$GRP_TEMP_LINE_ITEMS[iTempLineCount].#TEMPLM_LINE_AMOUNT_4000:3 = $DETAIL_RECORD[iLineCount].#LINE_AMOUNT_4000;\n\t\t\t\t$GRP_TEMP_LINE_ITEMS[iTempLineCount].#TEMPLM_ITEM_DESCRIPTION_4010:3 = $DETAIL_RECORD[iLineCount].#ITEM_DESCRIPTION_4010;\n\t\t\t\tIF $DETAIL_RECORD[iLineCount].#LINE_AMOUNT_4000 > 0 THEN\n\t\t\t\t\t$GRP_TEMP_LINE_ITEMS[iTempLineCount].#TEMPLM_MODIFIER_HANDLING_CODE = \"C\";\n\t\t\t\tIF $DETAIL_RECORD[iLineCount].#LINE_AMOUNT_4000 <= 0 THEN\n\t\t\t\t\t$GRP_TEMP_LINE_ITEMS[iTempLineCount].#TEMPLM_MODIFIER_HANDLING_CODE = \"A\";\n\t\t\t\tIF LEFT($DETAIL_RECORD[iLineCount].#ITEM_DESCRIPTION_4010,10) = \"CRV CHARGE\" THEN\n\t\t\t\t\t$GRP_TEMP_LINE_ITEMS[iTempLineCount].#TEMPLM_MODIFIER_CODE = \"C110\";\n\t\t\t\tIF $DETAIL_RECORD[iLineCount].#LINE_AMOUNT_4000 > 0 THEN\n\t\t\t\t\t$GRP_TEMP_LINE_ITEMS[iTempLineCount].#TEMPLM_MODIFIER_INDICATOR = \"06\";\n\t\t\t\tIF $DETAIL_RECORD[iLineCount].#LINE_AMOUNT_4000 <= 0 THEN\n\t\t\t\t\t$GRP_TEMP_LINE_ITEMS[iTempLineCount].#TEMPLM_MODIFIER_INDICATOR = \"02\";\n\t\t\tEND\n\n\t\tIF LEFT($DETAIL_RECORD[iLineCount].#ITEM_DESCRIPTION_4010,35) = \"CHANGE ME TO LINE TO HEADER MODIFIER1 DESCRIPTION\" THEN\n\t\t\tBEGIN\n\t\t\t\trLine2HeaderModifier1 = rLine2HeaderModifier1 + $DETAIL_RECORD[iLineCount].#LINE_AMOUNT_4000;\n\t\t\t\tsLine2HeaderModifier1 = $DETAIL_RECORD[iLineCount].#ITEM_DESCRIPTION_4010;\n\t\t\t\tiTempLineCount = iTempLineCount - 1;\n\t\t\tEND\n\t\tIF LEFT($DETAIL_RECORD[iLineCount].#ITEM_DESCRIPTION_4010,35) = \"CHANGE ME TO LINE TO HEADER MODIFIER2 DESCRIPTION\" THEN\n\t\t\tBEGIN\n\t\t\t\trLine2HeaderModifier2 = rLine2HeaderModifier2 + $DETAIL_RECORD[iLineCount].#LINE_AMOUNT_4000;\n\t\t\t\tsLine2HeaderModifier2 = $DETAIL_RECORD[iLineCount].#ITEM_DESCRIPTION_4010;\n\t\t\t\tiTempLineCount = iTempLineCount - 1;\n\t\t\tEND\n\tEND"
        }
    }
]